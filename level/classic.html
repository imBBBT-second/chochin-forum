<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0">
<title>초친 포럼 (레벨 - 클래식)</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  background: #323232;
}
* { box-sizing: border-box; }

/* ===== Fonts ===== */
@font-face { font-family: Paperlogy2; src: url('font - paperlogy/Paperlogy-2.ttf'); }
@font-face { font-family: Paperlogy3; src: url('font - paperlogy/Paperlogy-3.ttf'); }
@font-face { font-family: Paperlogy5; src: url('font - paperlogy/Paperlogy-5.ttf'); }
@font-face { font-family: Paperlogy7; src: url('font - paperlogy/Paperlogy-7.ttf'); }
@font-face { font-family: Paperlogy9; src: url('font - paperlogy/Paperlogy-9.ttf'); }

/* ===== Header ===== */
.header-container {
  display:flex;
  justify-content:center;
  gap:5vw;
  padding:20px 0;
}
.header-btn {
  width:400px;
  background:#323232;
  color:#fff;
  border:none;
  font-size:3rem;
  font-family:Paperlogy5;
  cursor:pointer;
}
.divider { border:2px solid white; }

h1 {
  color:#fff;
  font-family:Paperlogy9;
  font-size:140px;
  text-align:center;
  margin:10px 0;
}

/* ===== Layout ===== */
.main-container {
  display:flex;
  gap:2%;
  padding:2%;
  height: calc(100vh - 260px);
}

.container,
.detail-panel {
  background:#404040;
  border-radius:12px;
  padding:16px;
  overflow-y:auto;
}

.container { width:25%; }
.detail-panel { flex:1; }
.clears-panel { width:25%; }

/* ===== List ===== */
input {
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  font-family:Paperlogy3;
  font-size:16px;
}

.item {
  display:flex;
  gap:12px;
  padding:10px 0;
  border-bottom:1px solid #666;
  cursor:pointer;
}
.rank {
  width:40px;
  font-family:Paperlogy7;
  font-size:18px;
  color:#fff;
}
.title {
  font-family:Paperlogy5;
  font-size:18px;
  color:#fff;
}
.creator {
  font-family:Paperlogy3;
  font-size:14px;
  color:#aaa;
}

/* ===== Detail ===== */
.detail-title {
  text-align:center;
  font-family:Paperlogy9;
  font-size:48px;
}
#detailCreator {
  text-align:center;
  font-family:Paperlogy3;
  font-size:16px;
  color:#ccc;
}

/* Video */
.video-wrapper {
  position:relative;
  width:100%;
  padding-top:56.25%;
  margin:16px 0;
}
.video-wrapper iframe {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:none;
}

/* ===== Sections ===== */
.section {
  background:#4a4a4a;
  padding:14px;
  border-radius:10px;
  margin-bottom:14px;
}
.section-title {
  font-family:Paperlogy7;
  font-size:20px;
  margin-bottom:10px;
}

/* ===== Info Grid ===== */
.info-grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px 16px;
}
.info-row {
  display:flex;
  justify-content:space-between;
  font-size:16px;
}
.label {
  font-family:Paperlogy3;
  color:#bbb;
}
.value {
  font-family:Paperlogy5;
  color:#fff;
}

/* ===== Bars ===== */
.bar-row {
  display:grid;
  grid-template-columns:80px 1fr 60px;
  align-items:center;
  gap:10px;
  margin:6px 0;
}
.bar-row span {
  font-family:Paperlogy3;
}
.bar-bg {
  background:#333;
  height:14px;
  border-radius:8px;
  overflow:hidden;
}
.bar-fill {
  height:100%;
  background:linear-gradient(90deg,#5fd3ff,#4aa3ff);
}

/* ===== FP ===== */
.fp-bars {
  display:flex;
  align-items:flex-end;
  gap:12px;
  height:100px;
}
.fp-bar {
  flex:1;
  background:#6aa8ff;
  border-radius:8px 8px 0 0;
  text-align:center;
  font-family:Paperlogy3;
  font-size:14px;
  color:#fff;
}

/* ===== Tags ===== */
.tag {
  display:inline-block;
  background:#666;
  padding:6px 10px;
  border-radius:8px;
  margin:4px;
  font-family:Paperlogy3;
  font-size:14px;
  color:#fff;
}
</style>
</head>

<body>

<div class="header-container">
  <button class="header-btn">홈</button>
  <button class="header-btn">레벨</button>
  <button class="header-btn">하디스트</button>
</div>
<div class="divider"></div>

<h1>Classic</h1>

<div class="main-container">
  <!-- 리스트 -->
  <div class="container">
    <input id="search" placeholder="검색">
    <div id="list"></div>
  </div>

  <!-- 상세 -->
  <div class="detail-panel">
    <div id="detailTitle" class="detail-title"></div>
    <div id="detailCreator"></div>

    <div class="video-wrapper">
      <iframe id="detailVideo" allowfullscreen></iframe>
    </div>

    <div id="detailDescription"></div>
  </div>

  <!-- 클리어 -->
  <div class="detail-panel clears-panel">
    <div class="detail-title" style="font-size:32px">클리어 명단</div>
    <div id="detailClears"></div>
  </div>
</div>

<script>
let demonData = [];

function bar(label, value) {
  return `
    <div class="bar-row">
      <span>${label}</span>
      <div class="bar-bg">
        <div class="bar-fill" style="width:${value}%"></div>
      </div>
      <span>${value}%</span>
    </div>`;
}

function showDetail(item) {
  detailTitle.textContent = item.title;
  detailCreator.textContent =
    item.creator === item.verifier
      ? `by ${item.creator}`
      : `by ${item.creator} / Verified by ${item.verifier}`;

  detailVideo.src = item.video || '';
  detailDescription.innerHTML = '';

  if (item.map) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">맵 정보</div>
      <div class="info-grid">
        <div class="info-row"><span class="label">맵 ID</span><span class="value">${item.map.mapId}</span></div>
        <div class="info-row"><span class="label">길이</span><span class="value">${item.map.length}</span></div>
        <div class="info-row"><span class="label">오브젝트</span><span class="value">${item.map.objects}</span></div>
        <div class="info-row"><span class="label">업로드</span><span class="value">${item.map.uploadDate}</span></div>
      </div>
    </div>`;
  }

  if (item.gameplay) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">게임플레이</div>
      ${Object.entries(item.gameplay.modeRatio || {}).map(([k,v])=>bar(k,v)).join('')}
      ${Object.entries(item.gameplay.speedRatio || {}).map(([k,v])=>bar(k,v)).join('')}
    </div>`;
  }

  if (item.framePerfect) {
    const f = item.framePerfect.fps;
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">프레임 퍼펙트</div>
      <div class="fp-bars">
        ${[30,60,120,240].map(n=>`
          <div class="fp-bar" style="height:${(f[n]||0)*3}px">
            ${n}<br>${f[n]||0}
          </div>`).join('')}
      </div>
    </div>`;
  }

  if (item.tags) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">태그</div>
      ${item.tags.map(t=>`<span class="tag">#${t}</span>`).join('')}
    </div>`;
  }

  detailClears.innerHTML = item.clears?.length
    ? item.clears.map((c,i)=>`<p>${i+1}. ${c}</p>`).join('')
    : '<p style="color:#aaa;text-align:center">클리어 없음</p>';
}

function generateList(data) {
  list.innerHTML = '';
  data.forEach(d => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="rank">${d.id}</div>
      <div>
        <div class="title">${d.title}</div>
        <div class="creator">by ${d.creator}</div>
      </div>`;
    div.onclick = ()=>showDetail(d);
    list.appendChild(div);
  });
}

fetch('classic.json')
  .then(r=>r.json())
  .then(j=>{
    demonData = j.buttons;
    generateList(demonData);
    showDetail(demonData[0]);
  });

search.oninput = () => {
  const t = search.value.toLowerCase();
  generateList(demonData.filter(d=>d.title.toLowerCase().includes(t)));
};
</script>

</body>
</html>
